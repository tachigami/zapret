Описание
---
Этот репозиторий содержит дополнительные скрипты для автоматической установки и запуска [zapret](https://github.com/bol-van/zapret) на роутерах Keenetic через Entware.

Основной целью является минимальное вмешательство в исходные скрипты zapret и его концепцию работы.

Для запуска используются стандартные sysv скрипты с дополнениями под кинетик, загружающие необходимые модули ядра.

#### Требования к роутеру:

- 256MB+ RAM
- USB port
- OS 4.2.1+
- Компоненты: `Модули ядра подсистемы Netfilter`

Установка
---

- Установить на роутер Entware по [инструкции](https://help.keenetic.com/hc/ru/articles/360021214160-%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2-%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F-Entware-%D0%BD%D0%B0-USB-%D0%BD%D0%B0%D0%BA%D0%BE%D0%BF%D0%B8%D1%82%D0%B5%D0%BB%D1%8C)
- Распаковать архив с zapret на флешку по пути /opt/zapret
- Запустить скрипт установки `install_easy.sh` и установить zapret следуя инструкциям в [документации](/docs/readme.txt)

После установки проверьте следующие параметры конфигурации они важны для работы
```
TMPDIR=/opt/zapret/tmp
WS_USER=nobody
FWTYPE=iptables
IFACE_LAN=br0
IFACE_WAN=<ваш интерфейс из ifconfig например ppp0 или eth2.2>
```

Управлять службой можно с помощью команды
`/opt/etc/init.d/S99zapret <restart|stop|start>`

#### Что делать дальше?

Запускайте blockcheck, выбирайте необходимые способ и параметры дурения.
